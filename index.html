<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Privater Termin Monitor</title>
    <style>
        body { background-color: #121212; color: white; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        h1 { border-bottom: 2px solid #00cae3; padding-bottom: 10px; }
        #liste { width: 100%; max-width: 600px; margin-top: 20px; }
        .termin-card { background: #1e1e1e; margin: 10px 0; padding: 15px; border-radius: 8px; display: flex; justify-content: space-between; }
        .name { font-weight: bold; }
        .zeit { color: #00cae3; font-family: monospace; }
    </style>
</head>
<body>

    <h1>Termin Monitor (Privat)</h1>
    <div id="liste">Lade private Daten...</div>

    <script>
        const GITHUB_TOKEN = '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';
        const GITHUB_URL = 'https://raw.githubusercontent.com/dacasio/termine-dashboard/main/termine.json';

        async function ladeTermine() {
            try {
                const response = await fetch(GITHUB_URL, {
                    headers: {
                        'Authorization': `token ${GITHUB_TOKEN}`,
                        'Accept': 'application/vnd.github.v3.raw'
                    }
                });
                
                if (!response.ok) throw new Error('Fehler beim Laden: ' + response.status);
                
                const termine = await response.json();
                const listeDiv = document.getElementById('liste');
                listeDiv.innerHTML = ''; 

                const jetzt = new Date();

                termine.forEach(t => {
                    const ziel = new Date(t.ziel);
                    const diff = ziel - jetzt;
                    let zeitText = "Erledigt";

                    if (diff > 0) {
                        const d = Math.floor(diff / 86400000);
                        const h = Math.floor((diff % 86400000) / 3600000);
                        zeitText = `${d}d ${h}h`;
                    }

                    const card = document.createElement('div');
                    card.className = 'termin-card';
                    card.innerHTML = `<span class="name">${t.name}</span><span class="zeit">${zeitText}</span>`;
                    listeDiv.appendChild(card);
                });
            } catch (error) {
                document.getElementById('liste').innerText = 'Fehler: ' + error.message;
            }
        }

        ladeTermine();
    </script>
</body>
</html>
