function updateAnzeige(daten) {
    var html = "";
    var jetzt = new Date();
    // Aktuelle Zeit in Millisekunden
    var jetztMs = jetzt.getTime();

    for (var i = 0; i < daten.length; i++) {
        var t = daten[i];
        
        // Manueller Umbau: "2024-12-31 15:30" -> Jahr, Monat, Tag etc.
        // Wir nutzen substring, weil das am Kindle am stabilsten ist
        var j = parseInt(t.ziel.substring(0, 4), 10);
        var m = parseInt(t.ziel.substring(5, 7), 10) - 1; // Monate sind 0-11
        var d = parseInt(t.ziel.substring(8, 10), 10);
        var std = parseInt(t.ziel.substring(11, 13), 10);
        var min = parseInt(t.ziel.substring(14, 16), 10);

        var zielDatum = new Date(j, m, d, std, min, 0);
        var zielMs = zielDatum.getTime();
        
        var diffSek = Math.floor((zielMs - jetztMs) / 1000);
        var zeitStr = "FÃ„LLIG";
        var isUrgent = (diffSek <= 0);

        if (diffSek > 0) {
            var tage = Math.floor(diffSek / 86400);
            var restStunden = Math.floor((diffSek % 86400) / 3600);
            var restMinuten = Math.floor((diffSek % 3600) / 60);
            
            if (tage > 0) {
                zeitStr = tage + " TAG(E) " + restStunden + "H";
            } else {
                zeitStr = restStunden + "H " + restMinuten + "M";
            }
        }

        html += '<div class="termin-card ' + (isUrgent ? 'urgent' : '') + '">';
        html += '<div class="name">' + t.name + '</div>';
        html += '<div class="datum">' + d + "." + (m + 1) + ". " + std + ":" + (min < 10 ? '0' : '') + min + " UHR</div>";
        
        if (t.notiz) {
            html += '<div class="notiz">' + t.notiz + '</div>';
        }
        
        html += '<div class="zeit-box">' + zeitStr + '</div>';
        html += '</div>';
    }
    document.getElementById('liste').innerHTML = html;
}
